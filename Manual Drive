package com.qualcomm.ftcrobotcontroller.opmodes;

import com.qualcomm.robotcore.eventloop.opmode.OpMode;
import com.qualcomm.robotcore.hardware.DcMotor;
import com.qualcomm.robotcore.hardware.Servo;
import com.qualcomm.robotcore.util.Range;

public class Manual_Drive extends OpMode {

    DcMotor leftMotor;
    DcMotor rightMotor;
    
    DcMotor leftLiftTop;
    DcMotor leftLiftBottom;
    DcMotor rightLiftTop;
    DcMotor rightLiftBottom;
    
    float leftPower;
    float rightPower;
    
    boolean lift;

    @Override
    public void init() {
       
       //Justin Ansell has no friends
       
        lift = false;
       
        leftMotor = hardwareMap.dcMotor.get("left_drive");
        rightMotor = hardwareMap.dcMotor.get("right_drive");
        
        leftLiftTop = hardwareMap.dcMotor.get("left_lift_top");
        leftLiftBottom = hardwareMap.dcMotor.get("left_lift_bottom");
        rightLiftTop = hardwareMap.dcMotor.get("right_lift_top");
        rightLiftBottom = hardwareMap.dcMotor.get("right_lift_bottom);
        
        //reverse right motor (because why not)
        rightMotor.setDirection(DcMotor.Direction.REVERSE);
    }

    @Override
    public void loop() {
        float leftY = -gamepad1.left_stick_y;
        float rightY = -gamepad1.right_stick_y;

        leftY = Range.clip(leftY, -1, 1);
        rightY = Range.clip(rightY, -1, 1);

        if(leftY >=0) {
            leftPower = ((float) Math.pow(leftY,2));
        } else {
            leftPower = ((float) Math.pow(leftY,2))*-1;
        }
        if(rightY >=0) {
            rightPower = (float) Math.pow(rightY, 2);
        } else {
            rightPower = ((float) Math.pow(rightY, 2))*-1;
        }

        leftMotor.setPower(leftPower);
        rightMotor.setPower(rightPower);
        
        if (!lift) {
            if (gamepad.a) {
                leftLiftTop.setPower(1);
                leftLiftBottom.setPower(1);
                rightLiftTop.setPower(1);
                rightLiftBottom.setPower(1);
                lift = true;
            } else {
                leftLiftTop.setPower(0);
                leftLiftBottom.setPower(0);
                rightLiftTop.setPower(0);
                rightLiftBottom.setPower(0);
            }
        } else {
            if (gamepad.a) {
                leftLiftTop.setPower(-1);
                leftLiftBottom.setPower(-1);
                rightLiftTop.setPower(-1);
                rightLiftBottom.setPower(-1);
                lift = false;
            } else {
                leftLiftTop.setPower(0);
                leftLiftBottom.setPower(0);
                rightLiftTop.setPower(0);
                rightLiftBottom.setPower(0);
            }
        }
    }
}
